# Top Down Operator Precedence JavaScript Parser


In Douglas Crockford's article [Top Down Operator Precedence](http://javascript.crockford.com/tdop/tdop.html) 
he implements a parser first presented by Vaughan Pratt. I'll be building the same Parser myself, 
with the hopes of extending it for fun.  


## Use

As this project is in a very early stage, it has limited useability. It's meant to be run on NodeJS. 
The `buildTree.js` file will take a JS file as an argument, and output the raw JS parse tree 
generated by `parser.js` to the command-line. 


A little test file is included, `test.js`, which looks like:


```javascript

var sweetAdder = function(dawg, fish) {
	var a = [];
	while(dawg < fish){
		dawg = dawg + 1;
		a.push(dawg);		
	}
	return a;
};

var goober = sweetAdder(0, 15);

```



You can run the parser on the `test.js` file (or any [Simplified JavaScript](http://stackoverflow.com/a/4577277)) via


```
$ node buildTree.js test.js
```


The output should look like so:


```
Scanning..
Parsing..
Printing Tree for test.js:

[ { value: '=',
    arity: 'binary',
    first: 
     { value: 'sweetAdder',
       arity: 'name',
       reserved: false,
       nud: [Function: itself],
       led: null,
       std: null,
       lbp: 0,
       scope: 
        { def: 
           { var: { value: 'var', arity: 'name', reserved: true },
             sweetAdder: [Circular],
             goober: 
              { value: 'goober',
                arity: 'name',
                reserved: false,
                nud: [Function: itself],
                led: null,
                std: null,
                lbp: 0,
                scope: [Circular] } },
          parent: undefined } },
    second: 
     { value: 'function',
       arity: 'function',
       first: 
        [ { value: 'dawg',
            arity: 'name',
            reserved: false,
            nud: [Function: itself],
            led: null,
            std: null,
            lbp: 0,
            scope: 
             { def: 
                { dawg: [Circular],
                  fish: 
                   { value: 'fish',
                     arity: 'name',
                     reserved: false,
                     nud: [Function: itself],
                     led: null,
                     std: null,
                     lbp: 0,
                     scope: [Circular] },
                  a: 
                   { value: 'a',
                     arity: 'name',
                     reserved: false,
                     nud: [Function: itself],
                     led: null,
                     std: null,
                     lbp: 0,
                     scope: [Circular] },
                  while: 
                   { value: 'while',
                     arity: 'statement',
                     reserved: true,
                     first: 
                      { value: '<',
                        arity: 'binary',
                        first: { value: 'dawg', arity: 'name' },
                        second: { value: 'fish', arity: 'name' } },
                     second: 
                      [ { value: '=',
                          arity: 'binary',
                          first: { value: 'dawg', arity: 'name' },
                          second: 
                           { value: '+',
                             arity: 'binary',
                             first: { value: 'dawg', arity: 'name' },
                             second: { value: 1, arity: 'literal' } },
                          assignment: true },
                        { value: '(',
                          arity: 'binary',
                          first: 
                           { value: '.',
                             arity: 'binary',
                             first: { value: 'a', arity: 'name' },
                             second: { value: 'push', arity: 'literal' } },
                          second: [ { value: 'dawg', arity: 'name' } ] } ] },
                  return: 
                   { value: 'return',
                     arity: 'statement',
                     reserved: true,
                     first: { value: 'a', arity: 'name' } } },
               parent: 
                { def: 
                   { var: { value: 'var', arity: 'name', reserved: true },
                     sweetAdder: 
                      { value: 'sweetAdder',
                        arity: 'name',
                        reserved: false,
                        nud: [Function: itself],
                        led: null,
                        std: null,
                        lbp: 0,
                        scope: [Circular] },
                     goober: 
                      { value: 'goober',
                        arity: 'name',
                        reserved: false,
                        nud: [Function: itself],
                        led: null,
                        std: null,
                        lbp: 0,
                        scope: [Circular] } },
                  parent: undefined } } },
          { value: 'fish',
            arity: 'name',
            reserved: false,
            nud: [Function: itself],
            led: null,
            std: null,
            lbp: 0,
            scope: 
             { def: 
                { dawg: 
                   { value: 'dawg',
                     arity: 'name',
                     reserved: false,
                     nud: [Function: itself],
                     led: null,
                     std: null,
                     lbp: 0,
                     scope: [Circular] },
                  fish: [Circular],
                  a: 
                   { value: 'a',
                     arity: 'name',
                     reserved: false,
                     nud: [Function: itself],
                     led: null,
                     std: null,
                     lbp: 0,
                     scope: [Circular] },
                  while: 
                   { value: 'while',
                     arity: 'statement',
                     reserved: true,
                     first: 
                      { value: '<',
                        arity: 'binary',
                        first: { value: 'dawg', arity: 'name' },
                        second: { value: 'fish', arity: 'name' } },
                     second: 
                      [ { value: '=',
                          arity: 'binary',
                          first: { value: 'dawg', arity: 'name' },
                          second: 
                           { value: '+',
                             arity: 'binary',
                             first: { value: 'dawg', arity: 'name' },
                             second: { value: 1, arity: 'literal' } },
                          assignment: true },
                        { value: '(',
                          arity: 'binary',
                          first: 
                           { value: '.',
                             arity: 'binary',
                             first: { value: 'a', arity: 'name' },
                             second: { value: 'push', arity: 'literal' } },
                          second: [ { value: 'dawg', arity: 'name' } ] } ] },
                  return: 
                   { value: 'return',
                     arity: 'statement',
                     reserved: true,
                     first: { value: 'a', arity: 'name' } } },
               parent: 
                { def: 
                   { var: { value: 'var', arity: 'name', reserved: true },
                     sweetAdder: 
                      { value: 'sweetAdder',
                        arity: 'name',
                        reserved: false,
                        nud: [Function: itself],
                        led: null,
                        std: null,
                        lbp: 0,
                        scope: [Circular] },
                     goober: 
                      { value: 'goober',
                        arity: 'name',
                        reserved: false,
                        nud: [Function: itself],
                        led: null,
                        std: null,
                        lbp: 0,
                        scope: [Circular] } },
                  parent: undefined } } } ],
       second: 
        [ { value: '=',
            arity: 'binary',
            first: 
             { value: 'a',
               arity: 'name',
               reserved: false,
               nud: [Function: itself],
               led: null,
               std: null,
               lbp: 0,
               scope: 
                { def: 
                   { dawg: 
                      { value: 'dawg',
                        arity: 'name',
                        reserved: false,
                        nud: [Function: itself],
                        led: null,
                        std: null,
                        lbp: 0,
                        scope: [Circular] },
                     fish: 
                      { value: 'fish',
                        arity: 'name',
                        reserved: false,
                        nud: [Function: itself],
                        led: null,
                        std: null,
                        lbp: 0,
                        scope: [Circular] },
                     a: [Circular],
                     while: 
                      { value: 'while',
                        arity: 'statement',
                        reserved: true,
                        first: 
                         { value: '<',
                           arity: 'binary',
                           first: { value: 'dawg', arity: 'name' },
                           second: { value: 'fish', arity: 'name' } },
                        second: 
                         [ { value: '=',
                             arity: 'binary',
                             first: { value: 'dawg', arity: 'name' },
                             second: 
                              { value: '+',
                                arity: 'binary',
                                first: { value: 'dawg', arity: 'name' },
                                second: { value: 1, arity: 'literal' } },
                             assignment: true },
                           { value: '(',
                             arity: 'binary',
                             first: 
                              { value: '.',
                                arity: 'binary',
                                first: { value: 'a', arity: 'name' },
                                second: { value: 'push', arity: 'literal' } },
                             second: [ { value: 'dawg', arity: 'name' } ] } ] },
                     return: 
                      { value: 'return',
                        arity: 'statement',
                        reserved: true,
                        first: { value: 'a', arity: 'name' } } },
                  parent: 
                   { def: 
                      { var: { value: 'var', arity: 'name', reserved: true },
                        sweetAdder: 
                         { value: 'sweetAdder',
                           arity: 'name',
                           reserved: false,
                           nud: [Function: itself],
                           led: null,
                           std: null,
                           lbp: 0,
                           scope: [Circular] },
                        goober: 
                         { value: 'goober',
                           arity: 'name',
                           reserved: false,
                           nud: [Function: itself],
                           led: null,
                           std: null,
                           lbp: 0,
                           scope: [Circular] } },
                     parent: undefined } } },
            second: { value: '[', arity: 'unary', first: [] } },
          { value: 'while',
            arity: 'statement',
            reserved: true,
            first: 
             { value: '<',
               arity: 'binary',
               first: { value: 'dawg', arity: 'name' },
               second: { value: 'fish', arity: 'name' } },
            second: 
             [ { value: '=',
                 arity: 'binary',
                 first: { value: 'dawg', arity: 'name' },
                 second: 
                  { value: '+',
                    arity: 'binary',
                    first: { value: 'dawg', arity: 'name' },
                    second: { value: 1, arity: 'literal' } },
                 assignment: true },
               { value: '(',
                 arity: 'binary',
                 first: 
                  { value: '.',
                    arity: 'binary',
                    first: { value: 'a', arity: 'name' },
                    second: { value: 'push', arity: 'literal' } },
                 second: [ { value: 'dawg', arity: 'name' } ] } ] },
          { value: 'return',
            arity: 'statement',
            reserved: true,
            first: { value: 'a', arity: 'name' } } ] } },
  { value: '=',
    arity: 'binary',
    first: 
     { value: 'goober',
       arity: 'name',
       reserved: false,
       nud: [Function: itself],
       led: null,
       std: null,
       lbp: 0,
       scope: 
        { def: 
           { var: { value: 'var', arity: 'name', reserved: true },
             sweetAdder: 
              { value: 'sweetAdder',
                arity: 'name',
                reserved: false,
                nud: [Function: itself],
                led: null,
                std: null,
                lbp: 0,
                scope: [Circular] },
             goober: [Circular] },
          parent: undefined } },
    second: 
     { value: '(',
       arity: 'binary',
       first: { value: 'sweetAdder', arity: 'name' },
       second: 
        [ { value: 0, arity: 'literal' },
          { value: 15, arity: 'literal' } ] } } ]


```



## References

[Eli Bendersky](http://eli.thegreenplace.net/2010/01/02/top-down-operator-precedence-parsing/) has a nice blog-post
 about how TDOP works.
